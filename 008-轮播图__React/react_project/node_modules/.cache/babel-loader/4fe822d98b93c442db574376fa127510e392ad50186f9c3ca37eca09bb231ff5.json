{"ast":null,"code":"var _jsxFileName = \"D:\\\\leading_end\\\\daily_study\\\\008-\\u8F6E\\u64AD\\u56FE__React\\\\react_project\\\\src\\\\components\\\\SlidePictures\\\\SlidePictures.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, memo, useRef } from 'react';\nimport './SlidePictures.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SlidePictures = /*#__PURE__*/_s( /*#__PURE__*/memo(_c = _s(props => {\n  _s();\n  const picturesArr = props.picturesArr;\n  const [mouseEnter, setMouseEnter] = useState(false); //鼠标是否悬浮在整个区域上\n  const [pictureShowing, setPictureShowing] = useState(0); //当前展示的是第几张图片，用来更新底部圆点\n  const [hasClicked, setHasClicked] = useState(false); //函数节流，防止用户快速、频繁点击图片变换导致出错，flase为图片变换操作不可执行\n\n  const picturesUl = useRef(); // 图片外部的ul\n  const circles = useRef(); // 底部的小圆圈\n\n  const observer = new IntersectionObserver((entries, observer) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        const lazyImage = entry.target;\n        lazyImage.src = lazyImage.dataset.src;\n        observer.unobserve(lazyImage);\n      }\n    });\n  });\n\n  // 控制图片默认切换的方法(当前所展示的图片索引，用于控制是否变换的值)\n  const changeAction = (currentPictureIndex, controlIndex, currentIndex) => {\n    if (currentIndex < controlIndex) {\n      requestAnimationFrame(() => {\n        changeAction(currentIndex, controlIndex, currentIndex + 1);\n      });\n    } else {\n      const length = picturesArr.length - 1;\n      const nextIndex = (currentPictureIndex + 1) % length;\n      setPictureShowing(nextIndex);\n      requestAnimationFrame(() => {\n        changeAction(currentIndex, controlIndex, 1);\n      });\n    }\n  };\n  const lastPicutre = () => {};\n  const nextPictures = () => {};\n  const gotoDirectly = index => {};\n\n  // useEffect(()=>{\n  //     if (!newval) {     \n  //         this.$mytimer = setInterval(() => {\n  //             if (this.pictureShowing < this.pictures.length-1) {\n  //                 this.pictureShowing++;\n  //             } else {\n  //                 this.pictureShowing = 0;\n  //             }\n  //             this.changeDefault(10);\n  //         }, 3000);\n  //     } else {\n  //         clearInterval(this.$mytimer);\n  //     }\n  // }, [mouseEnter])\n\n  useEffect(() => {\n    for (let i = 0; i < this.pictures.length; i++) {\n      this.$refs.cicle[i].style.background = \"\";\n    }\n    this.$refs.cicle[newval].style.background = \"black\";\n  }, [pictureShowing]);\n  useEffect(() => {\n    const lazyImages = Array.from(picturesUl.current.childNodes).map(e => e.childNodes[0]);\n    if ('IntersectionObserver' in window) {\n      lazyImages.forEach(image => {\n        observer.observe(image);\n      });\n    } else {\n      lazyImages.forEach(image => {\n        image.src = image.dataset.src;\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"outest\",\n    onMouseOver: () => {\n      setMouseEnter(true);\n    },\n    onMouseLeave: () => {\n      setMouseEnter(false);\n    },\n    children: [mouseEnter ? /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"icon _left\",\n      src: \"left.png\",\n      alt: \"last\",\n      onClick: lastPicutre\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 30\n    }, this) : '', /*#__PURE__*/_jsxDEV(\"ul\", {\n      ref: picturesUl,\n      children: picturesArr.map(e => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            \"data-src\": e.src,\n            alt: e.alt,\n            loading: \"lazy\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this)\n        }, e.index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this), mouseEnter ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mydiv\",\n      children: picturesArr.map(e => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: circles,\n          className: \"empty-cicle\",\n          onClick: gotoDirectly(e.index)\n        }, e.index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 41\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }, this) : '', mouseEnter ? /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"icon _right\",\n      src: \"right.png\",\n      alt: \"next\",\n      onClick: nextPictures\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 30\n    }, this) : '']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}, \"qJ8bP+kkcx7Pf9nc7HSi3aFatBM=\")), \"qJ8bP+kkcx7Pf9nc7HSi3aFatBM=\");\n_c2 = SlidePictures;\nexport default SlidePictures;\nvar _c, _c2;\n$RefreshReg$(_c, \"SlidePictures$memo\");\n$RefreshReg$(_c2, \"SlidePictures\");","map":{"version":3,"names":["React","useEffect","useState","memo","useRef","jsxDEV","_jsxDEV","SlidePictures","_s","_c","props","picturesArr","mouseEnter","setMouseEnter","pictureShowing","setPictureShowing","hasClicked","setHasClicked","picturesUl","circles","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","lazyImage","target","src","dataset","unobserve","changeAction","currentPictureIndex","controlIndex","currentIndex","requestAnimationFrame","length","nextIndex","lastPicutre","nextPictures","gotoDirectly","index","i","pictures","$refs","cicle","style","background","newval","lazyImages","Array","from","current","childNodes","map","e","window","image","observe","className","onMouseOver","onMouseLeave","children","alt","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","loading","_c2","$RefreshReg$"],"sources":["D:/leading_end/daily_study/008-轮播图__React/react_project/src/components/SlidePictures/SlidePictures.jsx"],"sourcesContent":["import React, {useEffect, useState, memo, useRef} from 'react'\r\nimport './SlidePictures.scss'\r\n\r\nconst SlidePictures = memo((props) => {\r\n    const picturesArr = props.picturesArr;\r\n    const [mouseEnter, setMouseEnter] = useState(false);       //鼠标是否悬浮在整个区域上\r\n    const [pictureShowing, setPictureShowing] = useState(0);   //当前展示的是第几张图片，用来更新底部圆点\r\n    const [hasClicked, setHasClicked] = useState(false);       //函数节流，防止用户快速、频繁点击图片变换导致出错，flase为图片变换操作不可执行\r\n\r\n    const picturesUl = useRef();                    // 图片外部的ul\r\n    const circles = useRef();                       // 底部的小圆圈\r\n\r\n    const observer = new IntersectionObserver((entries, observer) => {  \r\n        entries.forEach(entry => {  \r\n            if(entry.isIntersecting) {  \r\n                const lazyImage = entry.target;  \r\n                lazyImage.src = lazyImage.dataset.src;\r\n                observer.unobserve(lazyImage);  \r\n            }  \r\n        });  \r\n    });\r\n\r\n    // 控制图片默认切换的方法(当前所展示的图片索引，用于控制是否变换的值)\r\n    const changeAction = (currentPictureIndex, controlIndex, currentIndex) =>{\r\n        if(currentIndex < controlIndex){\r\n            requestAnimationFrame(() => {changeAction(currentIndex, controlIndex, currentIndex + 1)})\r\n        }else{\r\n            const length = picturesArr.length - 1;\r\n            const nextIndex = (currentPictureIndex + 1) % length;\r\n            setPictureShowing(nextIndex);\r\n            requestAnimationFrame(() => {changeAction(currentIndex, controlIndex, 1)})\r\n        }\r\n    }\r\n\r\n    const lastPicutre = () => {\r\n\r\n    }\r\n    const nextPictures = () => {\r\n\r\n    }\r\n    const gotoDirectly = (index) => {\r\n\r\n    }\r\n\r\n    // useEffect(()=>{\r\n    //     if (!newval) {     \r\n    //         this.$mytimer = setInterval(() => {\r\n    //             if (this.pictureShowing < this.pictures.length-1) {\r\n    //                 this.pictureShowing++;\r\n    //             } else {\r\n    //                 this.pictureShowing = 0;\r\n    //             }\r\n    //             this.changeDefault(10);\r\n    //         }, 3000);\r\n    //     } else {\r\n    //         clearInterval(this.$mytimer);\r\n    //     }\r\n    // }, [mouseEnter])\r\n\r\n    useEffect(()=>{\r\n        for(let i = 0; i < this.pictures.length; i++) {\r\n            (this.$refs.cicle)[i].style.background = \"\";\r\n        }\r\n        (this.$refs.cicle)[newval].style.background = \"black\";\r\n    },[pictureShowing])\r\n\r\n    useEffect(()=>{\r\n        const lazyImages = Array.from(picturesUl.current.childNodes).map(e => e.childNodes[0])\r\n        if('IntersectionObserver' in window){  \r\n            lazyImages.forEach(image => { observer.observe(image); });  \r\n        }else{\r\n            lazyImages.forEach(image => { image.src = image.dataset.src; });  \r\n        }\r\n    })\r\n\r\n    return (\r\n        <div className=\"outest\" onMouseOver={() => {setMouseEnter(true)}} onMouseLeave={() => {setMouseEnter(false)}} >\r\n            {/* 向左icon，鼠标进入轮播图区域时才显现 */}\r\n            {\r\n                mouseEnter ? <img className=\"icon _left\" src=\"left.png\" \r\n                    alt=\"last\" onClick={lastPicutre}/> : ''\r\n            }\r\n            {/* 主要图片 */}\r\n            <ul ref={picturesUl}>\r\n            {\r\n                picturesArr.map(e => {\r\n                    return (<li key={e.index}>\r\n                        <img data-src={e.src} alt={e.alt} loading='lazy'/>\r\n                    </li>)\r\n                })\r\n            }\r\n            </ul>\r\n            {/* 底部小圆圈的设置 */}\r\n            {\r\n                mouseEnter ? (\r\n                    <div className=\"mydiv\">\r\n                        {\r\n                            picturesArr.map(e =>{\r\n                                return (<div ref={circles}\r\n                                    className=\"empty-cicle\" key={e.index} onClick={gotoDirectly(e.index)}>\r\n                                    </div>)\r\n                            })\r\n                        }\r\n                    </div>\r\n                ) : ''\r\n            }\r\n            {/* 向右icon，鼠标进入轮播图区域时才显现 */}\r\n            {\r\n                mouseEnter ? <img className=\"icon _right\" src=\"right.png\" alt=\"next\" \r\n                    onClick={nextPictures}/> : ''\r\n            }\r\n        </div>\r\n    )\r\n})\r\n\r\nexport default SlidePictures;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}